---
sidebar_position: 1
title: arcigs/core 4 æœ¬åœ°åŒ–
description: arcigs/core 4 æœ¬åœ°åŒ–
date: 2024-7-23

tags: [arcgis for js4]
---

[å‚è€ƒï¼šarcgis js + webpack å®Œå…¨æœ¬åœ°åŒ–éƒ¨ç½²æµç¨‹](https://juejin.cn/post/7187700867582132285)  

## æœ¬åœ°åŒ–æŒ‡ä»€ä¹ˆ?  

é€šè¿‡ `npm i @arcgis/core` å®‰è£…åŒ…æ¥ä½¿ç”¨ã€‚  

ä½†æ˜¯ä»£ç åœ¨å®é™…è¿è¡Œä¸­ï¼Œä»ç„¶ä¼šå»è®¿é—®åœ¨çº¿çš„arcgisèµ„æºï¼Œæ¯”å¦‚æ ·å¼ã€å­—ä½“ã€assetsèµ„æºç­‰ã€‚

å¦‚æœé¡¹ç›®å¯ä»¥åœ¨å…¬ç½‘è®¿é—®ï¼Œé‚£ä¹ˆè®¿é—®ğŸ‘†åœ¨çº¿èµ„æºæ²¡ä»€ä¹ˆæ¯›ç—…ã€‚  

ä½†æ˜¯å¦‚æœé¡¹ç›®åªèƒ½å†…ç½‘éƒ¨ç½²å‘¢? é‚£ä¹ˆè®¿é—®ğŸ‘†åœ¨çº¿èµ„æºå°±ä¼šæœ‰é—®é¢˜, æ¯”å¦‚measureçš„æ—¶å€™ä¸æ˜¾ç¤ºå­—ä½“..ã€‚

æ‰€ä»¥éœ€è¦æŠŠğŸ‘†åœ¨çº¿èµ„æºè¿ç§»åˆ°æœ¬åœ°ï¼Œè®©é¡¹ç›®ä»æœ¬åœ°åŠ è½½ã€‚  

## éœ€è¦æœ¬åœ°åŒ–çš„èµ„æºæœ‰?  

### 1 è®¿é—®åœ¨çº¿assetsèµ„æº  

å½“æˆ‘ä½¿ç”¨Measurementæ—¶ï¼š  

![è®¿é—®åœ¨çº¿assetsèµ„æº](./img/core/è®¿é—®åœ¨çº¿assetsèµ„æº.png)  

### 2 è®¿é—®åœ¨çº¿fontsèµ„æº  

è¿˜æ˜¯ä½¿ç”¨Measurementæ—¶ï¼šåœ°å›¾ä¸Šæµ‹é‡æ˜¾ç¤ºçš„å­—è¦è¯·æ±‚åœ¨çº¿fontsèµ„æºã€‚  

![è®¿é—®åœ¨çº¿fontsèµ„æº](./img/core/è®¿é—®åœ¨çº¿fontsèµ„æº.png)  

### 3 è®¿é—®assets/..../base/theme/light/main.cssèµ„æº  

æˆ‘åœ¨æœ¬åœ°å‘ç° æ‰“å¼€é¡¹ç›®çš„æ—¶å€™æœ‰4ä¸ªwoffå­—ä½“æŠ¥404.  

æˆ‘åœ¨ç‚¹æŸ¥åŠ äº†ä¸ª spinner å›¾æ ‡ï¼Œè¿™ä¸ªå›¾æ ‡æ¥è‡ª
![Loading_Indicator_double_32.svg](https://js.arcgis.com/4.30/esri/themes/base/images/Loading_Indicator_double_32.svg),
ä¹ŸæŠ¥404 æ‰¾ä¸åˆ°å›¾ç‰‡ã€‚  


TODO: æ”¾ä¸€ä¸ªå›¾

## æœ¬åœ°åŒ–assetsèµ„æº?  

[å‚è€ƒï¼šå®˜ç½‘assetsPath](https://developers.arcgis.com/javascript/latest/api-reference/esri-config.html#assetsPath)  

![assetsPath](./img/core/assetsPath.png)   

### 1 æ–¹æ³•ä¸€ï¼šæ‰‹åŠ¨å¤åˆ¶ç²˜è´´  

å°†`node_modules\@arcgis\core\assets`æ–‡ä»¶å¤¹æ•´ä¸ªå¤åˆ¶åˆ°é¡¹ç›®çš„publicæ–‡ä»¶å¤¹ä¸‹ã€‚  

![æœ¬åœ°ä¿å­˜assets](./img/core/æœ¬åœ°ä¿å­˜assets.png)   

ç„¶ååœ¨é¡¹ç›®ä¸­ä¿®æ”¹esriConfig.assetsPath = ...

(TODO: vue vite ,æ€ä¹ˆå¼•ç”¨publicç›®å½•ä¸‹çš„èµ„æºï¼ˆå¼€å‘ç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒï¼‰)  

ç¼ºç‚¹ï¼š å¢åŠ æ‰“åŒ…å¤§å°ã€‚ä¼šè¢«æ”¹åŠ¨ã€‚å¯èƒ½å‡ºç°å’Œç‰ˆæœ¬ä¸ä¸€è‡´çš„æƒ…å†µã€‚  

### 2 æ–¹æ³•äºŒï¼š  

`npm run dev` `npm run build` æ—¶å¤åˆ¶ã€‚  



## æœ¬åœ°åŒ–æœ¬åœ°å­—ä½“åº“ï¼Ÿ  

### éœ€æ±‚ï¼š  

å†…ç½‘æ—¶ï¼Œå‘ç°measure widget æ— æ³•æ˜¾ç¤ºæµ‹é‡å€¼ï¼Œ æ’æŸ¥å‘ç°æ˜¯è¯·æ±‚åœ¨çº¿å­—ä½“åº“å¤±è´¥å¯¼è‡´ã€‚

js apié»˜è®¤ä½¿ç”¨çš„å­—ä½“åº“æ˜¯åœ¨çº¿çš„(https://static.arcgis.com/fonts), å¦‚æœå†…ç½‘ä½¿ç”¨å‘¢ï¼Œæ‰€ä»¥éœ€è¦å°†å­—ä½“æ”¾åˆ°æœ¬åœ°ã€‚  

### è§£å†³ï¼š  

#### 1.çˆ¬arcgisçš„å­—ä½“  

æˆ‘æœ¬æ¥æƒ³ç€ç”¨pyçˆ¬ä¸‹æ¥ï¼Œï¼Œä½†æ˜¯å‘ç°fontsç›´æ¥è®¿é—®ä¸äº†é¢ = = 

#### 1.ç›´æ¥ç”¨åˆ«äººçˆ¬çš„å­—ä½“

[å‚è€ƒï¼šArcGIS API for JavaScriptå¦‚ä½•ä½¿ç”¨æœ¬åœ°çš„å­—ä½“åº“ ](http://zhihu.geoscene.cn/article/3893)  

æˆ‘å°†è¿™ä¸ª[githubä»“åº“](https://github.com/swaggyPYang/arcgisapi)é‡Œçš„fontsæ”¾åˆ°äº†æˆ‘é¡¹ç›®çš„public/arcgis-assets/fontsç›®å½•ä¸‹ï¼Œç„¶åä¿®æ”¹js apiçš„å¼•ç”¨ã€‚  

![æœ¬åœ°å­—ä½“ç›®å½•](./img/jsApiä½¿ç”¨/æœ¬åœ°å­—ä½“.png)  

#### 2. ä¿®æ”¹fontsUrl
esriConfig.fontsUrl = ARCGIS_API_FONTS_URL;



---



## æœ¬åœ°åŒ– theme main.css  

[å‚è€ƒï¼šè®ºå›é‡Œæœ‰äººæœ‰åŒæ ·çš„é”™è¯¯-Esri arcgis/core css relative paths](https://community.esri.com/t5/arcgis-javascript-maps-sdk-questions/esri-arcgis-core-css-relative-paths/m-p/1158294)  

[å‚è€ƒï¼šå®˜æ–¹Configure CSS](https://developers.arcgis.com/javascript/latest/get-started-npm/#amd-local-build-deprecated)  

![configure-css](./img/core/configure-css.png)  

### å…·ä½“æ“ä½œ(vue+vite)  

åœ¨é¡¹ç›®é‡ŒåŠ ä¸Š  `@import "@arcgis/core/assets/esri/themes/light/main.css";`  

è¿˜æ˜¯æŠ¥é”™.  

åœ¨é¡¹ç›®é‡ŒåŠ ä¸Špublicç›®å½•ä¸‹çš„å®ƒ  `@import "/public/arcgis-assets/assets/esri/themes/light/main.css";`  

è·¯å¾„åœ¨å¼€å‘ç¯å¢ƒæ²¡é—®é¢˜ã€‚  

è·¯å¾„åœ¨æ‰“åŒ…åç»å¯¹ä¼šæŠ¥é”™å§ã€‚  

æˆ‘åšæ³•æ˜¯åœ¨index.html é‡ŒåŠ :
<link href="/arcgis-assets/assets/esri/themes/light/main.css"></link>   


ï¼ˆTODO: è¿™é‡Œè¦å¼•å…¥vue vite ä½¿ç”¨publicèµ„æºçš„é“¾æ¥ï¼‰  

